{% load static i18n%}


<html lang="en" class="no-js">

<head>
<meta charset="utf-8">
<title>Administración de Servicios Externos</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1" name="viewport">
<meta content="" name="description">
<meta content="" name="Ing. Lazaro Gadiel Blanco Nieto">

<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0,minimum-scale=1.0">



<link rel="stylesheet" type="text/css" href="{% static 'assets/global/plugins/bootstrap-datepicker/css/datepicker.css' %}"/>

<link href="{% static 'estilo.css' %}" rel="stylesheet" type="text/css">

<link href="{% static 'grafico/index.css' %}" rel="stylesheet" type="text/css">

<link href="{% static 'assets/global/plugins/bootstrap-toastr/toastr.min.css' %}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/global/plugins/bootstrap-toastr/toastr.css' %}" rel="stylesheet" type="text/css">

<link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css">

<link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css'%}" rel="stylesheet" type="text/css">

<link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css'%}" rel="stylesheet" type="text/css">
<!-- END GLOBAL MANDATORY STYLES -->
<!-- BEGIN PAGE LEVEL PLUGIN STYLES -->
<link href="{% static 'assets/global/plugins/jqvmap/jqvmap/jqvmap.css'%}" rel="stylesheet" type="text/css">

<!-- END PAGE LEVEL PLUGIN STYLES -->
<!-- BEGIN PAGE STYLES -->
<link href="{% static 'assets/admin/pages/css/tasks.css'%}" rel="stylesheet" type="text/css"/>



<link rel="stylesheet" type="text/css" href="{% static 'assets/global/plugins/select2/select2.css'%}"/>
<link rel="stylesheet" type="text/css" href="{% static 'assets/global/plugins/datatables/extensions/Scroller/css/dataTables.scroller.min.css'%}"/>
<link rel="stylesheet" type="text/css" href="{% static 'assets/global/plugins/datatables/extensions/ColReorder/css/dataTables.colReorder.min.css'%}"/>
<link rel="stylesheet" type="text/css" href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.css'%}"/>




<!-- END PAGE STYLES -->
<!-- BEGIN THEME STYLES -->
<!-- DOC: To use 'rounded corners' style just load 'components-rounded.css' stylesheet instead of 'components.css' in the below style tag -->
<link href="{% static 'assets/global/css/components-md.css'%}" id="style_components" rel="stylesheet" type="text/css">
<link href="{% static 'assets/global/css/plugins-md.css'%}" id="style_components" rel="stylesheet" type="text/css">
<link href="{% static 'assets/global/css/components-rounded.css'%}" id="style_components" rel="stylesheet" type="text/css">
<link href="{% static 'assets/global/css/plugins.css'%}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/admin/layout3/css/layout.css'%}" rel="stylesheet" type="text/css">
<link href="{% static 'assets/admin/layout3/css/themes/default.css'%}" rel="stylesheet" type="text/css" id="style_color">
<link href="{% static 'assets/admin/layout3/css/custom.css'%}" rel="stylesheet" type="text/css">

<link href="{% static 'sweetalert2.min.css'%}" rel="stylesheet" type="text/css">
<link href="{% static 'animate.css'%}" rel="stylesheet" type="text/css">



<!-- END THEME STYLES -->
<link rel="shortcut icon" href="{% static 'favicon.ico'% }">



</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<!-- DOC: Apply "page-header-menu-fixed" class to set the mega menu fixed  -->
<!-- DOC: Apply "page-header-top-fixed" class to set the top menu fixed  -->
<body class="page-md">
<!-- BEGIN HEADER -->
<div class="page-header">
	<!-- BEGIN HEADER TOP -->
	<div class="page-header-top">

		<div class="container" id="top">


			<!-- BEGIN LOGO -->
			<div class="page-logo">
				<a ><img src="{% static 'assets/admin/layout/img/logojc.png'%}" alt="logo" class="logo-default" style="width: 100" ></a>
			</div>

			<!-- END LOGO -->
			<!-- BEGIN RESPONSIVE MENU TOGGLER -->
		
			<!-- END RESPONSIVE MENU TOGGLER -->
			<!-- BEGIN TOP NAVIGATION MENU -->
			
			<!-- END TOP NAVIGATION MENU -->
		</div>
	</div>
	<!-- END HEADER TOP -->
	<!-- BEGIN HEADER MENU -->
	<div class="page-header-menu" id="desplegar_menu" style="display: block" onclick="abrir_menu()">
		<div class="container" id="header-menu">
			<!-- BEGIN HEADER SEARCH BOX -->

			<div class="hor-menu ">
				<ul class="nav navbar-nav">

					<li class="active">
						<a href="{% url 'inicio' %}" >Inicio</a>
					</li>

					<li class="active">
						<a href="{% url 'instructores' %}" >Pedidos</a>
					</li>

					<li class="active">
						<a href="{% url 'clientes_atendidos' %}" >Clientes Atendidos</a>
					</li>
                
                   
                    <li  id="notificacion" class="active hidden">
                        <a  href= "{% url 'instructores' %}">
                            <i class="fa fa-bell-o"></i>
                            <span id="notif" class="badge badge-up badge-danger badge-small">
                                
                            </span>
                        </a>
                      
                    </li>
                   
                    {% if request.user.groups.all.0.name == "Instructores" or request.user.groups.all.0.name == "Directores"%}
                    <li class="menu-dropdown classic-menu-dropdown active">
                    	<a  data-toggle="dropdown" class="active dropdown-toggle navbar-user">
                           
                            <span ><i class="fa fa-user"></i> {{user.get_username}}</span>
                            <b class="caret"></b>
                        </a>
                      <ul class="dropdown-menu pull-right-xs">
                      	<li>
                     	    <a href="{% url 'cambio_pass' %}"><i class="active fa fa-edit"></i> Cambiar Contraseña</a>

                         </li>
                      </ul> 
                     <li class="active">
                     	    <a href="{% url 'logout' %}"><i class="active fa fa-sign-out"></i> Salir</a>

                     </li>
                    
                       
                     	                    
                   {% endif %}
                
                   
                   {% if request.user.is_superuser%}
                    <li class="menu-dropdown classic-menu-dropdown active">
                        <a data-toggle="dropdown" class="active dropdown-toggle navbar-user" href="javascript:;">
                           
                            <span class="hidden-xs"><i class="fa fa-user"></i> {{user.get_username}}</span>
                            <b class="caret"></b>
                        </a>
                        <ul class="dropdown-menu pull-right-xs">
                            <li class="arrow"></li>
                           
                            <li class="divider"></li>
                            <li>
                     	    <a href="{% url 'cambio_pass' %}"><i class="active fa fa-edit"></i> Cambiar Contraseña</a>

                         </li>
                           
                            <li><a href="/admin/" target="blanc"><i class="fa fa-database"></i> Administración</a>
                            </li>
                            <li class="divider"></li>
                            <li><a href="{% url 'logout' %}"><i class="fa fa-sign-out"></i> Salir</a></li>
                        </ul>
                    </li>
                    	{% endif %}
              
                </ul>
              

   
		     </div>

	    </div>
	<!-- END HEADER MENU -->
    </div>
<!-- END HEADER -->
</div>
<!-- BEGIN PAGE CONTAINER -->
<div class="container-all" id="move-content">
<div class="page-container">
	<!-- BEGIN PAGE HEAD -->
	<div class="page-head">
		<div class="container">
			<!-- BEGIN PAGE TITLE -->
			
			<!-- END PAGE TITLE -->
			<!-- BEGIN PAGE TOOLBAR -->
			<div class="page-toolbar">
			
			</div>
			<!-- END PAGE TOOLBAR -->
		</div>
	</div>
	<!-- END PAGE HEAD -->
	<!-- BEGIN PAGE CONTENT -->

    <div class="page-content">
       <div class="container" id="contenido">
			{% block content %}
     
         <div class="anuncios">
         <div class="small-box bg-success" id="anuncio1">
              <div class="inner">
                <h3 id="atend" align="center" style="padding: 1rem; font-size: 3rem; color: #fff"></h3>
              <h4 id="footer-anuncio1" align="center">Clientes Atendidos en General</h4>
              </div>
            
    
         </div>
 
         </div>
         <br>
         <br>
         <br>
          <br>
         <br>
  {% if request.user.groups.all.0.name == "Instructores" %}
  <div class="portlet light">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-cogs font-green-sharp"></i>
								<span class="caption-subject font-green-sharp bold uppercase">REPRESENTACIÓN   MES - RECAUDACIÓN</span>
							</div>
		
						</div>
						<div class="portlet-body">
						 
                           <div id="chartdiv"></div>
 
										
						</div>
   </div>
  {% endif %}
   {% if request.user.groups.all.0.name == "Directores" or  request.user.is_superuser %}
    <div class="portlet light">
						<div class="portlet-title">
							<div class="caption">
								<i class="fa fa-cogs font-green-sharp"></i>
								<span class="caption-subject font-green-sharp bold uppercase">REPRESENTACIÓN   MUNICIPIO - RECAUDACIÓN EN EL MES ACTUAL</span>
							</div>
		
						</div>
						<div class="portlet-body">
						 
                           <div id="chartdiv1"></div>
 
										
						</div>
   </div>

  {% endif %}  
			{% endblock %}
		   
	    </div>
    </div>
</div>
<!-- END PAGE CONTENT -->
<!-- BEGIN PRE-FOOTER -->
<div class="page-prefooter">
	<div class="container">
		<div class="row">
			<div class="col-md-3 col-sm-6 col-xs-12 footer-block">
				<h2>Misión</h2>
				<p>
					Proporcionar conocimientos y servicios relacionados con las tecnologías 
					de la Información, las Comunicaciones y la Electrónica a la sociedad cubana.
				</p>
			</div>

			<div class="col-md-3 col-sm-6 col-xs-12 footer-block">
				<h2>Síguenos en:</h2>
								<ul class="social-icons">
				<!--	<li>
						<a href="javascript:;" data-original-title="rss" class="rss"></a>
					</li>
						<li>
						<a href="javascript:;" data-original-title="googleplus" class="googleplus"></a>
					</li>
					<li>
						<a href="javascript:;" data-original-title="linkedin" class="linkedin"></a>
					</li>
					<li>
						<a href="javascript:;" data-original-title="youtube" class="youtube"></a>
					</li>
					<li>
						<a href="javascript:;" data-original-title="vimeo" class="vimeo"></a>
					</li>
				-->	<li>
						<a href="javascript:;" data-original-title="facebook" class="facebook"></a>
					</li>
					<li>
						<a href="javascript:;" data-original-title="twitter" class="twitter"></a>
					</li>
				
					
				</ul>
			</div>
			<div class="col-md-3 col-sm-6 col-xs-12 footer-block">
				<h2>Contáctenos en:</h2>
				<address class="margin-bottom-40">
				Phone:  54-84-20-20<br>
				 Email: <a href="mailto:info@metronic.com">lazaro.blanco@art.jovenclub.cu</a>
				</address>
			</div>
		</div>
	</div>
</div>
<!-- END PRE-FOOTER -->
<!-- BEGIN FOOTER -->

<div class="page-footer">
	<div class="container">
		2021 &copy; Ing. Lazaro Gadiel Blanco Nieto
	</div>
</div>

<div class="scroll-to-top">
 <i class="icon-arrow-up"></i>
</div>
</div>
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS (Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="../../assets/global/plugins/respond.min.js"></script>
<script src="../../assets/global/plugins/excanvas.min.js"></script> 
<![endif]-->

<!-- EXPORTAR A PDF Y A EXCEL -->


<script src="{% static 'script_menu.js'%}" type="text/javascript"></script>

<script src="{% static 'assets/global/plugins/bootstrap-toastr/toastr.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-toastr/toastr.js'%}" type="text/javascript"></script>

<!--
<script src="{% static 'jquery-select2/select2.min.js'%}" type="text/javascript"></script>
-->
<script src="{% static 'assets/global/plugins/jquery.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-migrate.min.js'%}" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="{% static 'assets/global/plugins/jquery-ui/jquery-ui.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery.blockui.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery.cokie.min.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js'%}" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'jquery.table2excel.min.js'%}" type="text/javascript"></script>
<script src="{% static 'html2pdf.bundle.min.js'%}" type="text/javascript"></script>


<script type="text/javascript" src="{% static 'assets/global/plugins/select2/select2.min.js'%}"></script>
<script type="text/javascript" src="{% static 'assets/global/plugins/datatables/media/js/jquery.dataTables.min.js'%}"></script>

<script type="text/javascript" src="{% static 'assets/global/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js'%}"></script>
<script type="text/javascript" src="{% static 'assets/global/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js'%}"></script>
<script type="text/javascript" src="{% static 'assets/global/plugins/datatables/extensions/Scroller/js/dataTables.scroller.min.js'%}"></script>
<script type="text/javascript" src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/dataTables.bootstrap.js'%}"></script>


<script src="{% static 'assets/global/scripts/metronic.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/admin/pages/scripts/table-advanced.js'%}"></script>

<script  type="text/javascript" src="{% static 'assets/global/scripts/datatable.js'%}"></script>

<script  type="text/javascript" src="{% static 'assets/global/plugins/datatables/all.min.js'%}"></script>



<!-- IMPORTANT! fullcalendar depends on jquery-ui.min.js for drag & drop support -->

<script src="{% static 'assets/global/plugins/jquery.sparkline.min.js'%}" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="{% static 'assets/global/scripts/metronic.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/admin/layout3/scripts/layout.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/admin/layout3/scripts/demo.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/admin/pages/scripts/index3.js'%}" type="text/javascript"></script>
<script src="{% static 'assets/admin/pages/scripts/tasks.js'%}" type="text/javascript"></script>

<script src="{% static 'sweetalert2.all.min.js'%}" type="text/javascript"></script>



<script src="{% static 'amcharts4/core.js'%}"></script>
<script src="{% static 'amcharts4/charts.js'%}"></script>
<script src="{% static 'amcharts4/themes/animated.js'%}"></script>
<script src="{% static 'grafico/index.js'%}"></script>

<script type="text/javascript" src="{% static 'assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.js'%}"></script>




<script>
 $(document).ready(function() {   

{% if error %}
 Swal.fire({
   icon: 'error',
   title: 'Lo sentimos',
   text: 'Verifique los datos',
   
});
{%endif%}

{% if cambiado %}
 (async () => {	
   		await Swal.fire({
        icon: 'success',
        title: 'Excelente',
         text: 'Contraseña Cambiada Correctamente',
   	});
    window.location='/directorio/login/';
      })()
{%endif%}

 var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/graficas_municipales';
  $.get(url, function (pedidos) {

         data=JSON.parse(pedidos);
        
         am4core.useTheme(am4themes_animated);

var chart = am4core.create("chartdiv", am4charts.XYChart);

chart.data = data;

chart.padding(40, 40, 40, 40);

var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.dataFields.category = "date__month";
categoryAxis.renderer.minGridDistance = 60;

var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

var series = chart.series.push(new am4charts.ColumnSeries());
series.dataFields.categoryX = "date__month";
series.dataFields.valueY = "recaudacion";
series.tooltipText = "{valueY.value}"
series.columns.template.strokeOpacity = 0;

chart.cursor = new am4charts.XYCursor();

// as by default columns of the same series are of the same color, we add adapter which takes colors from chart.colors color set
series.columns.template.adapter.add("fill", function (fill, target) {
  return chart.colors.getIndex(target.dataItem.index);
});

         	
     
        
        });

 var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/graficas_provinciales';
  $.get(url, function (pedidos) {

         data=JSON.parse(pedidos);
        
         am4core.useTheme(am4themes_animated);

var chart = am4core.create("chartdiv1", am4charts.XYChart);

chart.data = data;

chart.padding(40, 40, 40, 40);

var categoryAxis = chart.xAxes.push(new am4charts.CategoryAxis());
categoryAxis.renderer.grid.template.location = 0;
categoryAxis.dataFields.category = "municipio__municipio";
categoryAxis.renderer.minGridDistance = 60;

var valueAxis = chart.yAxes.push(new am4charts.ValueAxis());

var series = chart.series.push(new am4charts.ColumnSeries());
series.dataFields.categoryX = "municipio__municipio";
series.dataFields.valueY = "recaudacion";
series.tooltipText = "{valueY.value}"
series.columns.template.strokeOpacity = 0;

chart.cursor = new am4charts.XYCursor();

// as by default columns of the same series are of the same color, we add adapter which takes colors from chart.colors color set
series.columns.template.adapter.add("fill", function (fill, target) {
  return chart.colors.getIndex(target.dataItem.index);
});

         	
     
        
        });







 $('#datepicker1').datepicker({
	            format: "yyyy-mm-dd",
	            autoclose: true,
	            todayHighlight: true,
		        showOtherMonths: true,
		        selectOtherMonths: true,
		        autoclose: true,
		        changeMonth: true,
		        changeYear: true,
		        orientation: "button"
		    });
 $('#datepicker2').datepicker({
	            format: "yyyy-mm-dd",
	            autoclose: true,
	            todayHighlight: true,
		        showOtherMonths: true,
		        selectOtherMonths: true,
		        autoclose: true,
		        changeMonth: true,
		        changeYear: true,
		        orientation: "button"
		    });





 var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/contador_atender';
        $.get(url, function (pedidos){
            if(pedidos>0){
                $("#notificacion").removeClass("hidden");
                $("#notif").text(pedidos);
            }


        });    

   var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/contador_atendidos';
        $.get(url, function (pedidos){

                $("#atend").text(pedidos);
            


        });      
}); 

$(document).ready(function() {    
  
   listar();
   atendidos();
   $('#id_provincia').select2();
   $('#municipio_id').select2();
   tableWrapper.find('.dataTables_filter input').addClass("form-control");
   
   Metronic.init(); // init metronic core componets
   Layout.init(); // init layout
   Demo.init(); // init demo(theme settings page)
   Index.init(); // init index page
   Tasks.initDashboardWidget(); // init tash dashboard widget
       
});
//////////////////// TABLA DE CLIENTES POR ATENDER ///////////////////////////////////
 function listar(){
	var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/por_atender/';
	 
    $.get(url, function (datos) {
    	datos=JSON.parse(datos);
    	
    	for (var i = 0; i < datos.length; i++) {
    		 
              var array=datos[i].date.split('-');
              var ano=array[0];
              var mes=array[1];
              var dia=array[2];
    		$('#listar').append('<tr id='+datos[i].carnet+'class="clientes"><td id="carnet_'+datos[i].carnet+'">'+datos[i].carnet+'</td><td id="nombre_'+datos[i].nombre+'">'+datos[i].nombre+'</td><td id="apellido1_'+datos[i].apellido1+'">'+datos[i].apellido1+'</td><td id="apellido2_'+datos[i].apellido2+'">'+datos[i].apellido2+'</td><td id="atender"><a class="btn btn-success" onclick=atender('+datos[i].carnet+','+ano+','+mes+','+dia+')><i class="fa fa-check"></i></a><a class="btn btn-warning" onclick=get_cliente('+datos[i].carnet+','+ano+','+mes+','+dia+')><i class="fa fa-eye"></i></a></td></tr>'); 


    	}
    	$("#sample_1").DataTable({});
    	var tableWrapper = jQuery('#sample_1_wrapper');
        tableWrapper.find('.dataTables_length select').select2();
	
    	  
    });	
 }
 //////////////////// TABLA DE CLIENTES ATENDIDOS ///////////////////////////////////
 function atendidos(){
	var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/atendidos/';
	 
    $.get(url, function (datos) {
    	datos=JSON.parse(datos);
    	
    	for (var i = 0; i < datos.length; i++) {
    		 
              var array=datos[i].date.split('-');
              var ano=array[0];
              var mes=array[1];
              var dia=array[2];
    		$('#atendidos').append('<tr id='+datos[i].carnet+'class="clientes"><td id="carnet_'+datos[i].carnet+'">'+datos[i].carnet+'</td><td id="nombre_'+datos[i].nombre+'">'+datos[i].nombre+'</td><td id="apellido1_'+datos[i].apellido1+'">'+datos[i].apellido1+'</td><td id="apellido2_'+datos[i].apellido2+'">'+datos[i].apellido2+'</td><td id="atender"><a class="btn btn-warning" onclick=get_cliente('+datos[i].carnet+','+ano+','+mes+','+dia+')><i class="fa fa-eye"></i></a></td></tr>'); 


    	}
    	$("#sample_2").DataTable({});
    	var tableWrapper = jQuery('#sample_2_wrapper');
        tableWrapper.find('.dataTables_length select').select2();
	
    	  
    });	
 }
  
/////////////////////// DETALLES DE CLIENTES POR ATENDER /////////////////////////////





      
     
      //////////////SELECT ANIDADO DE ESCUELA Y GRADO////////////////
        provincia=$("#id_provincia option:selected").val();
        var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/municipio_provincia';
        
        $.get(url+"/"+provincia, function (datos) {
         
         array = JSON.parse(datos);
         
        for (var i = 0; i < array.length; i++) {
              $('#municipio_id').append('<option value="'+array[i].municipio__id+'">'+array[i].municipio__municipio+'</option>');
        }
        //if($('#user_cola_id').text()!='')
        //$('#cola_user').val($('#user_cola_id').text());
        $('#municipio_id').select2();

        });

        $('#id_provincia').change(function (){
         $('#municipio_id').empty(); 
             provincia=$("#id_provincia option:selected").val();
        var url='http://'+document.location.hostname+':'+document.location.port+'/directorio/municipio_provincia';
        
        $.get(url+"/"+provincia, function (datos) {
         
         array = JSON.parse(datos);
         
        for (var i = 0; i < array.length; i++) {
              $('#municipio_id').append('<option value="'+array[i].municipio__id+'">'+array[i].municipio__municipio+'</option>');
        }
        //if($('#user_cola_id').text()!='')
        //$('#cola_user').val($('#user_cola_id').text());
        $('#municipio_id').select2();

        });
          

        });
        
     





cargar();

 


</script>




<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>